webpackJsonp([1],{"1sJe":function(n,e){},HL3V:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\nbody {\n  margin: 0;\n  padding: 0;\n  font-family: Verdana, Geneva, sans-serif;\n}\ninput {\n  max-width: 500px;\n}\n.gray {\n  color: #828282;\n}\n.orange {\n  background-color: #ff6600;\n}\n.background-gray {\n  background-color: #f6f6ef;\n}\n.f11 {\n  font-size: 11px;\n}\n.w85 {\n  width: 85%;\n}\n.button {\n  font-family: monospace;\n  font-size: 10pt;\n  color: black;\n  background-color: buttonface;\n  text-align: center;\n  padding: 2px 6px 3px;\n  border-width: 2px;\n  border-style: outset;\n  border-color: buttonface;\n  cursor: pointer;\n  max-width: 250px;\n}\n","",{version:3,sources:["/Users/janzheng/Desktop/projects/danceSource/vue/boilerplate/src/App.vue"],names:[],mappings:";AAiEA;EACE,UAAS;EACT,WAAU;EACV,yCAAwC;CACzC;AAED;EACE,iBAAgB;CACjB;AAED;EACE,eAAc;CACf;AAED;EACE,0BAAyB;CAC1B;AAED;EACE,0BAAkC;CACnC;AAED;EACE,gBAAe;CAChB;AAED;EACE,WAAU;CACX;AAED;EACE,uBAAsB;EACtB,gBAAe;EACf,aAAY;EACZ,6BAA4B;EAC5B,mBAAkB;EAClB,qBAAoB;EACpB,kBAAiB;EACjB,qBAAoB;EACpB,yBAAwB;EACxB,gBAAe;EACf,iBAAgB;CACjB",file:"App.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbody {\n  margin: 0;\n  padding: 0;\n  font-family: Verdana, Geneva, sans-serif;\n}\n\ninput {\n  max-width: 500px;\n}\n\n.gray {\n  color: #828282;\n}\n\n.orange {\n  background-color: #ff6600;\n}\n\n.background-gray {\n  background-color: rgb(246,246,239);\n}\n\n.f11 {\n  font-size: 11px;\n}\n\n.w85 {\n  width: 85%;\n}\n\n.button {\n  font-family: monospace;\n  font-size: 10pt;\n  color: black;\n  background-color: buttonface;\n  text-align: center;\n  padding: 2px 6px 3px;\n  border-width: 2px;\n  border-style: outset;\n  border-color: buttonface;\n  cursor: pointer;\n  max-width: 250px;\n}\n"],sourceRoot:""}])},NHnr:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("u1/p"),i=(t("1sJe"),t("7+uW")),o=t("69U5"),a=t("/ocq"),s=t("2R8v"),l=t.n(s),u=t("tlQw"),d=t.n(u),c=l()(["\n  query AllLinksQuery($first: Int, $skip: Int, $orderBy: LinkOrderBy) {\n    allLinks(first: $first, skip: $skip, orderBy: $orderBy) {\n      id \n      createdAt\n      url \n      description\n      postedBy {\n        id \n        name \n      }\n      votes {\n        id \n        user {\n          id \n        }\n      }\n    }\n    _allLinksMeta {\n      count\n    }\n  }\n"],["\n  query AllLinksQuery($first: Int, $skip: Int, $orderBy: LinkOrderBy) {\n    allLinks(first: $first, skip: $skip, orderBy: $orderBy) {\n      id \n      createdAt\n      url \n      description\n      postedBy {\n        id \n        name \n      }\n      votes {\n        id \n        user {\n          id \n        }\n      }\n    }\n    _allLinksMeta {\n      count\n    }\n  }\n"]),p=l()(["\n  mutation CreateLinkMutation($description: String!, $url: String!, $postedById: ID!) {\n    createLink(\n      description: $description,\n      url: $url,\n      postedById: $postedById\n    ) {\n      id\n      createdAt\n      url\n      description\n      postedBy {\n        id\n        name\n      }\n    }\n  }\n"],["\n  mutation CreateLinkMutation($description: String!, $url: String!, $postedById: ID!) {\n    createLink(\n      description: $description,\n      url: $url,\n      postedById: $postedById\n    ) {\n      id\n      createdAt\n      url\n      description\n      postedBy {\n        id\n        name\n      }\n    }\n  }\n"]),v=l()(["\n  mutation CreateUserMutation($name: String!, $email: String!, $password: String!) {\n    signupUser(\n      name: $name,\n      email: $email,\n      password: $password\n    ) {\n      id\n      token\n    }\n\n    authenticateUser(\n      email: $email,\n      password: $password\n    ) {\n      token\n      id\n    }\n  }\n"],["\n  mutation CreateUserMutation($name: String!, $email: String!, $password: String!) {\n    signupUser(\n      name: $name,\n      email: $email,\n      password: $password\n    ) {\n      id\n      token\n    }\n\n    authenticateUser(\n      email: $email,\n      password: $password\n    ) {\n      token\n      id\n    }\n  }\n"]),m=l()(["\n  mutation SigninUserMutation($email: String!, $password: String!) {\n    authenticateUser(\n      email: $email,\n      password: $password\n    ) {\n      token\n      id\n    }\n  }\n"],["\n  mutation SigninUserMutation($email: String!, $password: String!) {\n    authenticateUser(\n      email: $email,\n      password: $password\n    ) {\n      token\n      id\n    }\n  }\n"]),f=l()(["\n  mutation CreateVoteMotation($userId: ID!, $linkId: ID!) {\n    createVote(userId: $userId, linkId: $linkId) {\n      id\n      link {\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n      user {\n        id \n      }\n    }\n  }\n"],["\n  mutation CreateVoteMotation($userId: ID!, $linkId: ID!) {\n    createVote(userId: $userId, linkId: $linkId) {\n      id\n      link {\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n      user {\n        id \n      }\n    }\n  }\n"]),k=l()(["\n  query AllLinksSearchQuery($searchText: String!) {\n    allLinks(filter: {\n      OR: [{\n        url_contains: $searchText\n      }, {\n        description_contains: $searchText\n      }]\n    }) {\n      id\n      url\n      description\n      createdAt\n      postedBy {\n        id\n        name\n      }\n      votes {\n        id\n        user {\n          id\n        }\n      }\n    }\n  }\n"],["\n  query AllLinksSearchQuery($searchText: String!) {\n    allLinks(filter: {\n      OR: [{\n        url_contains: $searchText\n      }, {\n        description_contains: $searchText\n      }]\n    }) {\n      id\n      url\n      description\n      createdAt\n      postedBy {\n        id\n        name\n      }\n      votes {\n        id\n        user {\n          id\n        }\n      }\n    }\n  }\n"]),h=l()(["\n  subscription {\n    Link(filter: {\n      mutation_in: [CREATED]\n    }) {\n      node {\n        id \n        url \n        description\n        createdAt\n        postedBy {\n          id \n          name\n        }\n        votes {\n          id \n          user {\n            id\n          }\n        }\n      }\n    }\n  }\n"],["\n  subscription {\n    Link(filter: {\n      mutation_in: [CREATED]\n    }) {\n      node {\n        id \n        url \n        description\n        createdAt\n        postedBy {\n          id \n          name\n        }\n        votes {\n          id \n          user {\n            id\n          }\n        }\n      }\n    }\n  }\n"]),g=l()(["\n  subscription {\n    Vote(filter: {\n      mutation_in: [CREATED]\n    }) {\n      node {\n        id \n        link {\n          id \n          url\n          description\n          createdAt\n          postedBy {\n            id\n            name\n          }\n          votes {\n            id \n            user {\n              id\n            }\n          }\n        }\n        user {\n          id\n        }\n      }\n    }\n  }\n"],["\n  subscription {\n    Vote(filter: {\n      mutation_in: [CREATED]\n    }) {\n      node {\n        id \n        link {\n          id \n          url\n          description\n          createdAt\n          postedBy {\n            id\n            name\n          }\n          votes {\n            id \n            user {\n              id\n            }\n          }\n        }\n        user {\n          id\n        }\n      }\n    }\n  }\n"]),A=d()(c),_=d()(p),y=d()(v),w=d()(m),C=d()(f),$=d()(k),x=d()(h),b=d()(g),I="graphcool-user-id",L="graphcool-auth-token",E={name:"createLink",data:function(){return{description:"",url:""}},methods:{createLink:function(){var n=this,e=localStorage.getItem(I);e||console.error("No user logged in");var t=this.description,r=this.url;this.description="",this.url="",this.$apollo.mutate({mutation:_,variables:{description:t,url:r,postedById:e},update:function(n,e){var t=e.data.createLink,r=n.readQuery({query:A,variables:{first:5,skip:0,orderBy:"createdAt_DESC"}});r.allLinks.push(t),n.writeQuery({query:A,variables:{first:5,skip:0,orderBy:"createdAt_DESC"},data:r})}}).then(function(e){n.$router.push({path:"/"})}).catch(function(e){console.error(e),n.newDesciption=t,n.newURl=r})}}},B=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("div",{staticClass:"flex flex-column mt3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.description,expression:"description"}],staticClass:"mb2",attrs:{type:"text",placeholder:"A description for the link"},domProps:{value:n.description},on:{input:function(e){e.target.composing||(n.description=e.target.value)}}}),n._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:n.url,expression:"url"}],staticClass:"mb2",attrs:{type:"text",placeholder:"The URL for the link"},domProps:{value:n.url},on:{input:function(e){e.target.composing||(n.url=e.target.value)}}})]),n._v(" "),t("button",{on:{click:function(e){n.createLink()}}},[n._v("Submit")])])};B._withStripped=!0;var S={render:B,staticRenderFns:[]},D=S;var U=t("VU/8")(E,D,!1,null,null,null);U.options.__file="src/components/CreateLink.vue";var T=U.exports,P=t("Dd8w"),N=t.n(P),V=t("Gu7T"),R=t.n(V);var j={name:"LinkItem",computed:{userId:function(){return this.$root.$data.userId},linkNumber:function(){return this.$route.path.includes("new")?(this.pageNumber-1)*this.linksPerPage+(this.index+1):this.index+1}},data:function(){return{linksPerPage:5}},props:["link","index","pageNumber"],methods:{voteForLink:function(){var n=this,e=localStorage.getItem(I);if(this.link.votes.map(function(n){return n.user.id}).includes(e))console.error("User ("+e+") already voted for this link.");else{var t=this.link.id;this.$apollo.mutate({mutation:C,variables:{userId:e,linkId:t},update:function(e,r){var i=r.data.createVote;n.updateStoreAfterVote(e,i,t)}})}},updateStoreAfterVote:function(n,e,t){var r=n.readQuery({query:A});r.allLinks.find(function(n){return n.id===t}).votes=e.link.votes,n.writeQuery({query:A,data:r})},timeDifferenceForDate:function(n){var e,t,r=(new Date).getTime(),i=new Date(n).getTime();return e=864e5,(t=r-i)<2e4?"just now":t<6e4?"less than 1 min ago":t<36e5?Math.round(t/6e4)+" min ago":t<e?Math.round(t/36e5)+" h ago":t<2592e6?Math.round(t/e)+" days ago":t<31536e6?Math.round(t/2592e6)+" mo ago":Math.round(t/31536e6)+" years ago"}}},F=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"flex mt2 items-start"},[t("div",{staticClass:"flex items-center"},[t("span",{staticClass:"gray"},[n._v(n._s(n.linkNumber)+".")]),n._v(" "),n.userId?t("div",{staticClass:"ml1 gray f11 upvote",on:{click:function(e){n.voteForLink()}}},[n._v("▲")]):n._e()]),n._v(" "),t("div",{staticClass:"ml1"},[t("a",{staticClass:"link",attrs:{href:n.link.url}},[n._v(n._s(n.link.description)+" ("+n._s(n.link.url)+")")]),n._v(" "),t("div",{staticClass:"f6 lh-copy gray"},[n._v("\n      "+n._s(n.link.votes.length)+" votes | by "+n._s(n.link.postedBy?n.link.postedBy.name:"Unknown")+" "+n._s(n.timeDifferenceForDate(n.link.createdAt))+"\n    ")])])])};F._withStripped=!0;var q={render:F,staticRenderFns:[]},O=q;var M=!1;var Q=t("VU/8")(j,O,!1,function(n){M||t("nyjD")},"data-v-9a7b5846",null);Q.options.__file="src/components/LinkItem.vue";var z=Q.exports,H=t("M4fF"),G=t.n(H),Y={name:"LinkList",data:function(){return{allLinks:[],loading:0,count:0,banana:0}},components:{LinkItem:z},apollo:{allLinks:{query:A,subscribeToMore:[{document:x,updateQuery:function(n,e){var t=[e.subscriptionData.data.Link.node].concat(R()(n.allLinks));return N()({},n,{allLinks:t.slice(0,5)})}},{document:b,updateQuery:function(n,e){var t=e.subscriptionData,r=n.allLinks.findIndex(function(n){return n.id===t.data.Vote.node.link.id}),i=t.data.Vote.node.link,o=n.allLinks.slice();return o[r]=i,N()({},n,{allLinks:o})}}],variables:function(){var n=parseInt(this.$route.params.page,10),e=this.$route.path.includes("new");return{first:e?5:100,skip:e?5*(n-1):0,orderBy:e?"createdAt_DESC":null}},update:function(n){return this.count=n._allLinksMeta.count,n.allLinks}}},methods:{getLinksToRender:function(n){if(n)return this.$apollo.queries.allLinks;var e=this.$apollo.queries.allLinks.slice();return e.sort(function(n,e){return e.votes.length-n.votes.length}),e},nextPage:function(){var n=parseInt(this.$route.params.page,10);if(n<this.count/5){var e=n+1;this.$router.push({path:"/new/"+e})}},previousPage:function(){var n=parseInt(this.$route.params.page,10);if(n>1){var e=n-1;this.$router.push({path:"/new/"+e})}}},computed:{orderedLinks:function(){return this.$route.path.includes("top")?G.a.orderBy(this.allLinks,"votes.length").reverse():this.allLinks},isFirstPage:function(){return"1"===this.$route.params.page},isNewPage:function(){return this.$route.path.includes("new")},pageNumber:function(n){return parseInt(this.$route.params.page,10)},morePages:function(){return parseInt(this.$route.params.page,10)<this.count/5}}},K=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("div",[n.loading?t("h4",[n._v("Loading ...")]):n._e(),n._v(" "),n._l(n.orderedLinks,function(e,r){return t("link-item",{key:e.id,attrs:{link:e,index:r,pageNumber:n.pageNumber}})})],2),n._v(" "),n.isNewPage?t("div",[t("button",{directives:[{name:"show",rawName:"v-show",value:!n.isFirstPage,expression:"!isFirstPage"}],on:{click:function(e){n.previousPage()}}},[n._v("Previous")]),n._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:n.morePages,expression:"morePages"}],on:{click:function(e){n.nextPage()}}},[n._v("Next")])]):n._e()])};K._withStripped=!0;var W={render:K,staticRenderFns:[]},Z=W;var J=t("VU/8")(Y,Z,!1,null,null,null);J.options.__file="src/components/LinkList.vue";var X=J.exports,nn={name:"AppLogin",data:function(){return{email:"",login:!0,name:"",password:""}},methods:{confirm:function(){var n=this,e=this.$data,t=e.name,r=e.email,i=e.password;this.login?this.$apollo.mutate({mutation:w,variables:{email:r,password:i}}).then(function(e){var t=e.data.authenticateUser.id,r=e.data.authenticateUser.token;n.saveUserData(t,r)}).catch(function(n){console.error("login error: ",n)}):this.$apollo.mutate({mutation:y,variables:{name:t,email:r,password:i}}).then(function(e){console.log("create user result: ",e);var t=e.data.signupUser.id,r=e.data.signupUser.token;n.saveUserData(t,r)}).catch(function(n){console.error("create user error: ",n)}),this.$router.push({path:"/"})},saveUserData:function(n,e){localStorage.setItem(I,n),localStorage.setItem(L,e),this.$root.$data.userId=localStorage.getItem(I)}}},en=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("h4",{staticClass:"mv3"},[n._v(n._s(n.login?"Login":" Signup"))]),n._v(" "),t("div",{staticClass:"flex flex-column"},[t("input",{directives:[{name:"show",rawName:"v-show",value:!n.login,expression:"!login"},{name:"model",rawName:"v-model",value:n.name,expression:"name"}],attrs:{type:"text",placeholder:"Your Name"},domProps:{value:n.name},on:{input:function(e){e.target.composing||(n.name=e.target.value)}}}),n._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:n.email,expression:"email"}],attrs:{type:"text",placeholder:"Your email address"},domProps:{value:n.email},on:{input:function(e){e.target.composing||(n.email=e.target.value)}}}),n._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:n.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:n.password},on:{input:function(e){e.target.composing||(n.password=e.target.value)}}})]),n._v(" "),t("div",{staticClass:"flex mt3"},[t("div",{staticClass:"pointer mr2 button",on:{click:function(e){n.confirm()}}},[n._v("\n      "+n._s(n.login?"login":"create account")+"\n    ")]),n._v(" "),t("div",{staticClass:"pointer button",on:{click:function(e){n.login=!n.login}}},[n._v("\n      "+n._s(n.login?"need to create an account?":"already have an account?")+"\n    ")])])])};en._withStripped=!0;var tn={render:en,staticRenderFns:[]},rn=tn;var on=t("VU/8")(nn,rn,!1,null,null,null);on.options.__file="src/components/AppLogin.vue";var an=on.exports,sn={name:"Search",data:function(){return{allLinks:[],searchText:""}},apollo:{allLinks:{query:$,variables:function(){return{searchText:this.searchText}},skip:function(){return!this.searchText}}},components:{LinkItem:z}},ln=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("div",[n._v("\n    Search\n    "),t("input",{directives:[{name:"model",rawName:"v-model",value:n.searchText,expression:"searchText"}],attrs:{type:"text"},domProps:{value:n.searchText},on:{input:function(e){e.target.composing||(n.searchText=e.target.value)}}})]),n._v(" "),n._l(n.allLinks,function(n,e){return t("link-item",{key:n.id,attrs:{link:n,index:e}})})],2)};ln._withStripped=!0;var un={render:ln,staticRenderFns:[]},dn=un;var cn=t("VU/8")(sn,dn,!1,null,null,null);cn.options.__file="src/components/Search.vue";var pn=cn.exports;i.a.use(a.a);var vn=new a.a({routes:[{path:"/",redirect:"/new/1"},{path:"/create",component:T},{path:"/login",component:an},{path:"/new/:page",component:X},{path:"/search",component:pn},{path:"/top",component:X}]}),mn=t("0F+l"),fn=t.n(mn),kn=t("rp1p"),hn=t("+dIz"),gn=(t("fRwX"),t("uiq3")),An=t("Z6Fn"),_n=t("+zi7"),yn={name:"AppHeader",computed:{userId:function(){return this.$root.$data.userId}},methods:{logout:function(){localStorage.removeItem(I),localStorage.removeItem(L),this.$root.$data.userId=localStorage.getItem(I)}}},wn=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"flex pa1 justify-between nowrap orange"},[t("div",{staticClass:"flex flex-fixed black"},[t("router-link",{staticClass:"fw7 mr1 no-underline black",attrs:{to:"/"}},[n._v("Hacker News")]),n._v(" "),t("router-link",{staticClass:"ml1 no-underline black",attrs:{to:"/"}},[n._v("new")]),n._v(" "),t("div",{staticClass:"ml1"},[n._v("|")]),n._v(" "),t("router-link",{staticClass:"ml1 no-underline black",attrs:{to:"/top"}},[n._v("top")]),n._v(" "),t("div",{staticClass:"ml1"},[n._v("|")]),n._v(" "),t("router-link",{staticClass:"ml1 no-underline black",attrs:{to:"/search"}},[n._v("search")]),n._v(" "),n.userId?t("div",{staticClass:"flex"},[t("div",{staticClass:"ml1"},[n._v("|")]),n._v(" "),t("router-link",{staticClass:"ml1 no-underline black",attrs:{to:"/create"}},[n._v("submit")])],1):n._e()],1),n._v(" "),t("div",{staticClass:"flex flex-fixed"},[n.userId?t("div",{staticClass:"ml1 pointer black",on:{click:function(e){n.logout()}}},[n._v("logout")]):t("router-link",{staticClass:"ml1 no-underline black",attrs:{to:"/login"}},[n._v("login")])],1)])};wn._withStripped=!0;var Cn={render:wn,staticRenderFns:[]},$n=Cn;var xn=t("VU/8")(yn,$n,!1,null,null,null);xn.options.__file="src/components/AppHeader.vue";var bn={name:"app",components:{AppHeader:xn.exports},methods:{onClickOutside:function(n,e){console.log("onClickOutside"),console.log("onClickOutside: click heard outside element: ",e),console.log("element clicked: ".e.target),console.log("event: ",n)},onOutside:function(n,e,t,r){console.log("jQuery Event"),console.log("jQ: click heard outside element: ",e),console.log("jQ data: ",n,t,r)}}},In=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"center w85"},[t("app-header"),n._v(" "),t("div",{staticClass:"ph3 pv1 background-gray"},[t("router-view")],1)],1),n._v(" "),t("div",{staticClass:"center w85"},[t("h1",[n._v("Test bed")]),n._v(" "),t("div",[t("h4",[n._v("Outside Click")]),n._v("\n      >> Look at the console for outside triggers; only works when built and used in conjunction w/ test.html\n      "),n._v(" "),t("div",{directives:[{name:"event-outside",rawName:"v-event-outside.jquery",value:{name:"onFoo",handler:n.onOutside},expression:"{ name: 'onFoo', handler: onOutside }",modifiers:{jquery:!0}}],attrs:{id:"myDiv2"}},[n._v("myDiv2")])]),n._v(" { handler: onClickOutside, foo: someVueData }\n\n  ")])])};In._withStripped=!0;var Ln={render:In,staticRenderFns:[]},En=Ln;var Bn=!1;var Sn=t("VU/8")(bn,En,!1,function(n){Bn||t("PV6j")},null,null);Sn.options.__file="src/App.vue";var Dn=Sn.exports,Un=t("NYxO");i.a.use(Un.a);var Tn=new Un.a.Store({state:{}});i.a.use(fn.a),i.a.use(o.a),i.a.config.productionTip=!1;var Pn=new kn.HttpLink({uri:"https://api.graph.cool/simple/v1/cjaq2lk9p3obh0170gwl9ugsb"}),Nn=new gn.ApolloLink(function(n,e){var t=localStorage.getItem(L);return t=t?"Bearer "+t:null,n.setContext({headers:{authorization:t}}),e(n)}),Vn=new An.a({uri:"wss://subscriptions.us-west-2.graph.cool/v1/cjaq2lk9p3obh0170gwl9ugsb",options:{reconnect:!0,connectionParams:{authToken:localStorage.getItem(L)}}}),Rn=gn.ApolloLink.split(function(n){var e=n.query,t=Object(_n.i)(e),r=t.kind,i=t.operation;return"OperationDefinition"===r&&"subscription"===i},Vn,Nn.concat(Pn)),jn=new r.ApolloClient({link:Rn,cache:(new hn.InMemoryCache).restore(window.__APOLLO_STATE__),connectToDevTools:!0}),Fn=new o.a({defaultClient:jn,defaultOptions:{$loadingKey:"loading"}}),qn=localStorage.getItem(I);new i.a({el:"#app",apolloProvider:Fn,store:Tn,router:vn,data:{userId:qn},render:function(n){return n(Dn)}})},PV6j:function(n,e,t){var r=t("HL3V");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);t("rjj0")("3d92bd4f",r,!1)},gsQW:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\n.upvote[data-v-9a7b5846] {\n  cursor: pointer;\n}\n.link[data-v-9a7b5846] {\n  text-decoration: none;\n  color: black;\n}\n","",{version:3,sources:["/Users/janzheng/Desktop/projects/danceSource/vue/boilerplate/src/components/src/components/LinkItem.vue"],names:[],mappings:";AAgFA;EACA,gBAAA;CACA;AAEA;EACA,sBAAA;EACA,aAAA;CACA",file:"LinkItem.vue",sourcesContent:["<template>\n  <div class='flex mt2 items-start'>\n    <div class='flex items-center'>\n      <span class='gray'>{{linkNumber}}.</span>\n      <div v-if='userId' class='ml1 gray f11 upvote' @click='voteForLink()'>▲</div>\n    </div>\n    <div class='ml1'>\n      <a :href='link.url' class='link'>{{link.description}} ({{link.url}})</a>\n      <div class='f6 lh-copy gray'>\n        {{link.votes.length}} votes | by {{link.postedBy ? link.postedBy.name : 'Unknown'}} {{timeDifferenceForDate(link.createdAt)}}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { timeDifferenceForDate } from '../utils'\n  import { ALL_LINKS_QUERY, CREATE_VOTE_MUTATION } from '../constants/graphql'\n  import { GC_USER_ID, LINKS_PER_PAGE } from '../constants/settings'\n\n  export default {\n    name: 'LinkItem',\n    computed: {\n      userId () {\n        return this.$root.$data.userId\n      },\n      linkNumber () {\n        if (this.$route.path.includes('new')) {\n          return (this.pageNumber - 1) * this.linksPerPage + (this.index + 1)\n        } else {\n          return this.index + 1\n        }\n      }\n    },\n    data() {\n      return {\n        linksPerPage: LINKS_PER_PAGE,\n      }\n    },\n    props: ['link', 'index', 'pageNumber'],\n    methods: {\n      voteForLink () {\n        const userId = localStorage.getItem(GC_USER_ID)\n        const voterIds = this.link.votes.map(vote => vote.user.id)\n        if (voterIds.includes(userId)) {\n          console.error(`User (${userId}) already voted for this link.`)\n          return\n        }\n        const linkId = this.link.id\n        this.$apollo.mutate({\n          mutation: CREATE_VOTE_MUTATION,\n          variables: {\n            userId,\n            linkId \n          },\n          update: (store, { data: {createVote } }) => {\n              this.updateStoreAfterVote(store, createVote, linkId)\n          }\n        })\n      },\n      updateStoreAfterVote (store, createVote, linkId) {\n        const data = store.readQuery({\n          query: ALL_LINKS_QUERY\n        })\n        const votedLink = data.allLinks.find(link => link.id === linkId)\n        votedLink.votes = createVote.link.votes \n\n        store.writeQuery({ query: ALL_LINKS_QUERY, data})\n      },\n      timeDifferenceForDate\n    }\n  }\n<\/script>\n\n\n\n\n\n\n\n<style scoped>\n  .upvote {\n    cursor: pointer;\n  }\n\n  .link {\n    text-decoration: none;\n    color: black;\n  }\n</style>\n\n\n"],sourceRoot:""}])},nyjD:function(n,e,t){var r=t("gsQW");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);t("rjj0")("05e44e56",r,!1)}},["NHnr"]);
//# sourceMappingURL=app.6494ddcd30f6d7a7629b.js.map